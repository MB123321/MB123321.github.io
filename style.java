function canvasMap(e){var t=document.getElementById("map");var n=t.getContext("2d");this.options=e||globalOptions;var r=this.options.height;var i=this.options.width;this.options.radius.x=i/2;this.options.radius.y=r/2;t.setAttribute("height",r);t.setAttribute("width",i)}function setCursorPosition(e,t){var n,r;canoffset=$(e).offset();n=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft-Math.floor(canoffset.left);r=t.clientY+document.body.scrollTop+document.documentElement.scrollTop-Math.floor(canoffset.top);r=r-globalOptions.height/2;n=n-globalOptions.width/2;var i={x:n,y:r};i.x=Math.round(i.x*10)/10;i.y=Math.round(i.y*10)/10;if(i.x&&i.y)getCountryName(i)}function getCoordinates(e,t){var n=globalOptions.radius;var r=Math.acos(t/n.y);var i=Math.acos(e/n.x/Math.sin(r));var s={};s.x=i*180/Math.PI-90;s.y=r*180/Math.PI-90;var o=Spinner._totalX;var u=Spinner._totalY;if(o>=180&&o<=360)o=o-360;if(u>=180&&u<=360)u=u-360;s.x=-s.x-o;s.y=s.y-u;return s}function getCountryName(e){var t=globalOptions.reWrite;var n=countries.data;for(var r=0;r<n.length;r++){var i=[];for(var s=0;s<t.length;s++){if(n[r].screen==t[s].z)i.push({x:t[s].x,y:t[s].y})}if(isPointInPoly(i,e)){actuateLink(document.getElementById("link-"+n[r].screen))}}}function isPointInPoly(e,t){for(var n=false,r=-1,i=e.length,s=i-1;++r<i;s=r)(e[r].y<=t.y&&t.y<e[s].y||e[s].y<=t.y&&t.y<e[r].y)&&t.x<(e[s].x-e[r].x)*(t.y-e[r].y)/(e[s].y-e[r].y)+e[r].x&&(n=!n);return n}function actuateLink(e){console.log(e);var t=document.createEvent("MouseEvents");t.initEvent("click",true,true);allowDefaultAction=e.dispatchEvent(t)}function touchHandler(e){var t=e.changedTouches,n=t[0],r="";switch(e.type){case"touchstart":r="mousedown";break;case"touchmove":r="mousemove";break;case"touchend":r="mouseup";break;default:return}var i=document.createEvent("MouseEvent");i.initMouseEvent(r,true,false,$("#spinner"),1,n.screenX,n.screenY,n.clientX,n.clientY,false,false,false,false,0,null);n.target.dispatchEvent(i)}function init(){Spinner.init();Spinner.simpleRotate(0,-25);interval=setInterval(function(){Spinner.displayFrame(3,0)},1/30*1e3)}var geojson={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"MultiPolygon",coordinates:[[[[0,90],[0,80],[0,70],[0,60],[0,50],[0,40],[0,30],[0,20],[0,10],[0,0],[0,-10],[0,-20],[0,-30],[0,-40],[0,-50],[0,-60],[0,-70],[0,-80],[0,-91],[.5,-91],[.5,-80],[.5,-70],[.5,-60],[.5,-50],[.5,-40],[.5,-30],[.5,-20],[.5,-10],[.5,0],[.5,10],[.5,20],[.5,30],[.5,40],[.5,50],[.5,60],[.5,70],[.5,80],[.5,90]],[[20,90],[20,80],[20,70],[20,60],[20,50],[20,40],[20,30],[20,20],[20,10],[20,0],[20,-10],[20,-20],[20,-30],[20,-40],[20,-50],[20,-60],[20,-70],[20,-80],[20,-91],[20.5,-91],[20.5,-80],[20.5,-70],[20.5,-60],[20.5,-50],[20.5,-40],[20.5,-30],[20.5,-20],[20.5,-10],[20.5,0],[20.5,10],[20.5,20],[20.5,30],[20.5,40],[20.5,50],[20.5,60],[20.5,70],[20.5,80],[20.5,90]],[[40,90],[40,80],[40,70],[40,60],[40,50],[40,40],[40,30],[40,20],[40,10],[40,0],[40,-10],[40,-20],[40,-30],[40,-40],[40,-50],[40,-60],[40,-70],[40,-80],[40,-91],[40.5,-91],[40.5,-80],[40.5,-70],[40.5,-60],[40.5,-50],[40.5,-40],[40.5,-30],[40.5,-20],[40.5,-10],[40.5,0],[40.5,10],[40.5,20],[40.5,30],[40.5,40],[40.5,50],[40.5,60],[40.5,70],[40.5,80],[40.5,90]],[[60,90],[60,80],[60,70],[60,60],[60,50],[60,40],[60,30],[60,20],[60,10],[60,0],[60,-10],[60,-20],[60,-30],[60,-40],[60,-50],[60,-60],[60,-70],[60,-80],[60,-91],[60.5,-91],[60.5,-80],[60.5,-70],[60.5,-60],[60.5,-50],[60.5,-40],[60.5,-30],[60.5,-20],[60.5,-10],[60.5,0],[60.5,10],[60.5,20],[60.5,30],[60.5,40],[60.5,50],[60.5,60],[60.5,70],[60.5,80],[60.5,90]],[[80,90],[80,80],[80,70],[80,60],[80,50],[80,40],[80,30],[80,20],[80,10],[80,0],[80,-10],[80,-20],[80,-30],[80,-40],[80,-50],[80,-60],[80,-70],[80,-80],[80,-91],[80.5,-91],[80.5,-80],[80.5,-70],[80.5,-60],[80.5,-50],[80.5,-40],[80.5,-30],[80.5,-20],[80.5,-10],[80.5,0],[80.5,10],[80.5,20],[80.5,30],[80.5,40],[80.5,50],[80.5,60],[80.5,70],[80.5,80],[80.5,90]],[[100,90],[100,80],[100,70],[100,60],[100,50],[100,40],[100,30],[100,20],[100,10],[100,0],[100,-10],[100,-20],[100,-30],[100,-40],[100,-50],[100,-60],[100,-70],[100,-80],[100,-91],[100.5,-91],[100.5,-80],[100.5,-70],[100.5,-60],[100.5,-50],[100.5,-40],[100.5,-30],[100.5,-20],[100.5,-10],[100.5,0],[100.5,10],[100.5,20],[100.5,30],[100.5,40],[100.5,50],[100.5,60],[100.5,70],[100.5,80],[100.5,90]],[[120,90],[120,80],[120,70],[120,60],[120,50],[120,40],[120,30],[120,20],[120,10],[120,0],[120,-10],[120,-20],[120,-30],[120,-40],[120,-50],[120,-60],[120,-70],[120,-80],[120,-91],[120.5,-91],[120.5,-80],[120.5,-70],[120.5,-60],[120.5,-50],[120.5,-40],[120.5,-30],[120.5,-20],[120.5,-10],[120.5,0],[120.5,10],[120.5,20],[120.5,30],[120.5,40],[120.5,50],[120.5,60],[120.5,70],[120.5,80],[120.5,90]],[[140,90],[140,80],[140,70],[140,60],[140,50],[140,40],[140,30],[140,20],[140,10],[140,0],[140,-10],[140,-20],[140,-30],[140,-40],[140,-50],[140,-60],[140,-70],[140,-80],[140,-91],[140.5,-91],[140.5,-80],[140.5,-70],[140.5,-60],[140.5,-50],[140.5,-40],[140.5,-30],[140.5,-20],[140.5,-10],[140.5,0],[140.5,10],[140.5,20],[140.5,30],[140.5,40],[140.5,50],[140.5,60],[140.5,70],[140.5,80],[140.5,90]],[[160,90],[160,80],[160,70],[160,60],[160,50],[160,40],[160,30],[160,20],[160,10],[160,0],[160,-10],[160,-20],[160,-30],[160,-40],[160,-50],[160,-60],[160,-70],[160,-80],[160,-91],[160.5,-91],[160.5,-80],[160.5,-70],[160.5,-60],[160.5,-50],[160.5,-40],[160.5,-30],[160.5,-20],[160.5,-10],[160.5,0],[160.5,10],[160.5,20],[160.5,30],[160.5,40],[160.5,50],[160.5,60],[160.5,70],[160.5,80],[160.5,90]],[[180,90],[180,80],[180,70],[180,60],[180,50],[180,40],[180,30],[180,20],[180,10],[180,0],[180,-10],[180,-20],[180,-30],[180,-40],[180,-50],[180,-60],[180,-70],[180,-80],[180,-91],[180.5,-91],[180.5,-80],[180.5,-70],[180.5,-60],[180.5,-50],[180.5,-40],[180.5,-30],[180.5,-20],[180.5,-10],[180.5,0],[180.5,10],[180.5,20],[180.5,30],[180.5,40],[180.5,50],[180.5,60],[180.5,70],[180.5,80],[180.5,90]],[[200,90],[200,80],[200,70],[200,60],[200,50],[200,40],[200,30],[200,20],[200,10],[200,0],[200,-10],[200,-20],[200,-30],[200,-40],[200,-50],[200,-60],[200,-70],[200,-80],[200,-91],[200.5,-91],[200.5,-80],[200.5,-70],[200.5,-60],[200.5,-50],[200.5,-40],[200.5,-30],[200.5,-20],[200.5,-10],[200.5,0],[200.5,10],[200.5,20],[200.5,30],[200.5,40],[200.5,50],[200.5,60],[200.5,70],[200.5,80],[200.5,90]],[[220,90],[220,80],[220,70],[220,60],[220,50],[220,40],[220,30],[220,20],[220,10],[220,0],[220,-10],[220,-20],[220,-30],[220,-40],[220,-50],[220,-60],[220,-70],[220,-80],[220,-91],[220.5,-91],[220.5,-80],[220.5,-70],[220.5,-60],[220.5,-50],[220.5,-40],[220.5,-30],[220.5,-20],[220.5,-10],[220.5,0],[220.5,10],[220.5,20],[220.5,30],[220.5,40],[220.5,50],[220.5,60],[220.5,70],[220.5,80],[220.5,90]],[[240,90],[240,80],[240,70],[240,60],[240,50],[240,40],[240,30],[240,20],[240,10],[240,0],[240,-10],[240,-20],[240,-30],[240,-40],[240,-50],[240,-60],[240,-70],[240,-80],[240,-91],[240.5,-91],[240.5,-80],[240.5,-70],[240.5,-60],[240.5,-50],[240.5,-40],[240.5,-30],[240.5,-20],[240.5,-10],[240.5,0],[240.5,10],[240.5,20],[240.5,30],[240.5,40],[240.5,50],[240.5,60],[240.5,70],[240.5,80],[240.5,90]],[[260,90],[260,80],[260,70],[260,60],[260,50],[260,40],[260,30],[260,20],[260,10],[260,0],[260,-10],[260,-20],[260,-30],[260,-40],[260,-50],[260,-60],[260,-70],[260,-80],[260,-91],[260.5,-91],[260.5,-80],[260.5,-70],[260.5,-60],[260.5,-50],[260.5,-40],[260.5,-30],[260.5,-20],[260.5,-10],[260.5,0],[260.5,10],[260.5,20],[260.5,30],[260.5,40],[260.5,50],[260.5,60],[260.5,70],[260.5,80],[260.5,90]],[[280,90],[280,80],[280,70],[280,60],[280,50],[280,40],[280,30],[280,20],[280,10],[280,0],[280,-10],[280,-20],[280,-30],[280,-40],[280,-50],[280,-60],[280,-70],[280,-80],[280,-91],[280.5,-91],[280.5,-80],[280.5,-70],[280.5,-60],[280.5,-50],[280.5,-40],[280.5,-30],[280.5,-20],[280.5,-10],[280.5,0],[280.5,10],[280.5,20],[280.5,30],[280.5,40],[280.5,50],[280.5,60],[280.5,70],[280.5,80],[280.5,90]],[[300,90],[300,80],[300,70],[300,60],[300,50],[300,40],[300,30],[300,20],[300,10],[300,0],[300,-10],[300,-20],[300,-30],[300,-40],[300,-50],[300,-60],[300,-70],[300,-80],[300,-91],[300.5,-91],[300.5,-80],[300.5,-70],[300.5,-60],[300.5,-50],[300.5,-40],[300.5,-30],[300.5,-20],[300.5,-10],[300.5,0],[300.5,10],[300.5,20],[300.5,30],[300.5,40],[300.5,50],[300.5,60],[300.5,70],[300.5,80],[300.5,90]],[[320,90],[320,80],[320,70],[320,60],[320,50],[320,40],[320,30],[320,20],[320,10],[320,0],[320,-10],[320,-20],[320,-30],[320,-40],[320,-50],[320,-60],[320,-70],[320,-80],[320,-91],[320.5,-91],[320.5,-80],[320.5,-70],[320.5,-60],[320.5,-50],[320.5,-40],[320.5,-30],[320.5,-20],[320.5,-10],[320.5,0],[320.5,10],[320.5,20],[320.5,30],[320.5,40],[320.5,50],[320.5,60],[320.5,70],[320.5,80],[320.5,90]],[[340,90],[340,80],[340,70],[340,60],[340,50],[340,40],[340,30],[340,20],[340,10],[340,0],[340,-10],[340,-20],[340,-30],[340,-40],[340,-50],[340,-60],[340,-70],[340,-80],[340,-91],[340.5,-91],[340.5,-80],[340.5,-70],[340.5,-60],[340.5,-50],[340.5,-40],[340.5,-30],[340.5,-20],[340.5,-10],[340.5,0],[340.5,10],[340.5,20],[340.5,30],[340.5,40],[340.5,50],[340.5,60],[340.5,70],[340.5,80],[340.5,90]]]]},properties:{name:"longitude"}},{type:"Feature",geometry:{type:"MultiPolygon",coordinates:[[[[-180,-80],[-170,-80],[-160,-80],[-150,-80],[-140,-80],[-130,-80],[-120,-80],[-110,-80],[-100,-80],[-90,-80],[-90,-79.8],[-100,-79.8],[-110,-79.8],[-120,-79.8],[-130,-79.8],[-140,-79.8],[-150,-79.8],[-160,-79.8],[-170,-79.8],[-180,-79.8],[-180,-80]]],[[[-90,-80],[-80,-80],[-70,-80],[-60,-80],[-50,-80],[-40,-80],[-30,-80],[-20,-80],[-10,-80],[0,-80],[0,-79.8],[-10,-79.8],[-20,-79.8],[-30,-79.8],[-40,-79.8],[-50,-79.8],[-60,-79.8],[-70,-79.8],[-80,-79.8],[-90,-79.8],[-90,-80]]],[[[0,-80],[10,-80],[20,-80],[30,-80],[40,-80],[50,-80],[60,-80],[70,-80],[80,-80],[90,-80],[90,-79.8],[80,-79.8],[70,-79.8],[60,-79.8],[50,-79.8],[40,-79.8],[30,-79.8],[20,-79.8],[10,-79.8],[0,-79.8],[0,-80]]]